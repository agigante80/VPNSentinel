# =============================================================================
# VPN SENTINEL ENVIRONMENT CONFIGURATION TEMPLATE
# =============================================================================
#
# ğŸ“‹ OVERVIEW:
# This file contains all environment variables needed to configure VPN Sentinel.
# Copy this file to .env and customize the values for your deployment.
#
# ğŸ”§ SETUP INSTRUCTIONS:
# 1. Copy this file: cp .env.example .env
# 2. Edit with your values: nano .env (or your preferred editor)
# 3. Validate: docker compose config (checks syntax)
# 4. Deploy: docker compose up -d
#
# âš ï¸  SECURITY NOTES:
# - Generate strong API keys: openssl rand -hex 32
# - Use HTTPS in production with valid certificates
# - Restrict server ports to trusted networks only
# - Keep .env file out of version control (it's in .gitignore)
#
# ğŸ” VALIDATION:
# Run 'docker compose config' to validate your .env file syntax
#
# =============================================================================

# =============================================================================
# ğŸ”’ SECURITY & CERTIFICATES
# =============================================================================

# Trust self-signed certificates for HTTPS requests (true/false)
# âš ï¸  WARNING: Only set to 'true' in development/testing environments!
# ğŸš« NEVER use in production - use proper CA-signed certificates instead
# ğŸ“ Purpose: Disables strict certificate verification for development
# ğŸ” Default: false (recommended for security)
TRUST_SELF_SIGNED_CERTIFICATES=false

# =============================================================================
# ğŸ›¡ï¸  VPN CLIENT CONFIGURATION
# =============================================================================
#
# ğŸ¯ IMPORTANT: VPN Sentinel works with ANY Docker VPN client!
# The docker-compose.yaml uses generic "vpn-client" service name.
# Replace the Gluetun service with your preferred VPN solution.
#
# âœ… SUPPORTED VPN CLIENTS:
# â€¢ Gluetun (qmcgaw/gluetun) - 70+ providers (our working example)
# â€¢ OpenVPN (dperson/openvpn-client) - custom OpenVPN configs
# â€¢ WireGuard (linuxserver/wireguard) - modern WireGuard protocol
# â€¢ Transmission+VPN (haugene/transmission-openvpn) - torrent client
# â€¢ PIA WireGuard (thrnz/docker-wireguard-pia) - Private Internet Access
#
# ğŸ”„ SETUP STEPS:
# 1. Choose your VPN client from examples below
# 2. Replace the "vpn-client" service in docker-compose.yaml
# 3. Uncomment and configure the corresponding environment variables
# 4. Test connectivity: docker compose up vpn-client
#
# ğŸ“š GLUETUN EXAMPLE (70+ VPN providers supported):
# Full provider list: https://github.com/qdm12/gluetun/wiki

# VPN Service Provider (Gluetun-specific)
# ğŸ“ Required for Gluetun - see https://github.com/qdm12/gluetun/wiki for full list
# ğŸ” Examples: privatevpn, nordvpn, expressvpn, surfshark, cyberghost, pia, mullvad
# ğŸ’¡ Popular choices: privatevpn (stable), nordvpn (fast), expressvpn (reliable)
VPN_SERVICE_PROVIDER=privatevpn

# VPN Account Credentials
# ğŸ“ Your VPN provider username/email and password
# ğŸ”’ Keep these secure - they're your VPN access credentials
# ğŸ’¡ Some providers use email as username, others require specific format
VPN_USER=your_vpn_username_here
VPN_PASSWORD=your_vpn_password_here

# Preferred Server Countries (Gluetun-specific)
# ğŸ“ Comma-separated list of countries for VPN server selection
# ğŸ¯ Gluetun will automatically choose the best server in these countries
# ğŸ” Examples: Switzerland,Netherlands,Sweden,Norway,Germany,United Kingdom
# ğŸ’¡ Choose countries with good connectivity and privacy laws
SERVER_COUNTRIES=Switzerland,Netherlands

# VPN Update Check Interval (Gluetun-specific)
# ğŸ“ How often Gluetun checks for VPN server updates
# â° Format: <number><unit> (h=hours, m=minutes)
# ğŸ” Default: 24h (recommended - balances freshness vs API load)
# ğŸ’¡ Shorter intervals = more current servers but more API calls
UPDATER_PERIOD=24h

# =============================================================================
# ğŸ”„ ALTERNATIVE VPN CLIENT CONFIGURATIONS
# =============================================================================
#
# Uncomment and modify ONE section below based on your chosen VPN client.
# Each section shows the required environment variables for that client.
#
# âš ï¸  IMPORTANT: Also update docker-compose.yaml to use the correct image!

# -----------------------------------------------------------------------------
# ğŸ³ OPENVPN CLIENT (dperson/openvpn-client)
# Image: dperson/openvpn-client:latest
# Docs: https://github.com/dperson/openvpn-client
# -----------------------------------------------------------------------------
# OPENVPN_CONFIG_FILE=/path/to/your/config.ovpn
# OPENVPN_USERNAME=your_username
# OPENVPN_PASSWORD=your_password

# -----------------------------------------------------------------------------
# ğŸ”— WIREGUARD CLIENT (linuxserver/wireguard)
# Image: linuxserver/wireguard:latest
# Docs: https://github.com/linuxserver/docker-wireguard
# -----------------------------------------------------------------------------
# WG_PEERS=1
# WG_SERVERURL=your.domain.com
# WG_SERVERPORT=51820

# -----------------------------------------------------------------------------
# ğŸ“¥ TRANSMISSION + VPN (haugene/transmission-openvpn)
# Image: haugene/transmission-openvpn:latest
# Docs: https://github.com/haugene/docker-transmission-openvpn
# -----------------------------------------------------------------------------
# OPENVPN_PROVIDER=NORDVPN
# OPENVPN_USERNAME=your_username
# OPENVPN_PASSWORD=your_password
# LOCAL_NETWORK=192.168.1.0/24

# -----------------------------------------------------------------------------
# ğŸ”’ PIA WIREGUARD (thrnz/docker-wireguard-pia)
# Image: thrnz/docker-wireguard-pia:latest
# Docs: https://github.com/thrnz/docker-wireguard-pia
# -----------------------------------------------------------------------------
# PIA_USER=your_pia_username
# PIA_PASS=your_pia_password
# PIA_AUTOPORT=true

# -----------------------------------------------------------------------------
# ğŸ‘¤ USER & GROUP IDS (for file permissions)
# ğŸ“ Required for some VPN clients to match host user permissions
# ğŸ” Get your IDs with: id $(whoami)
# ğŸ’¡ Only needed if VPN client requires specific UID/GID
# -----------------------------------------------------------------------------
# PUID_MEDIA=1000
# PGID_MEDIA=1000

# =============================================================================
# ğŸ”‘ VPN SENTINEL CORE CONFIGURATION
# =============================================================================
#
# These settings are used by both the VPN Sentinel client and server.
# They establish secure communication and basic system behavior.

# API Security Key (REQUIRED - generate a strong random key)
# ğŸ“ Used for authentication between client and server
# ğŸ”’ CRITICAL: Must be the same on client and server
# ğŸ› ï¸  Generate with: openssl rand -hex 32
# ğŸ“ Length: 64 hex characters (32 bytes)
# ğŸ” Example: a1b2c3d4e5f6789012345678901234567890abcdef1234567890abcdef123456
# ğŸ’¡ Store securely - this key protects your monitoring system
VPN_SENTINEL_API_KEY=your_secure_random_api_key_here

# TLS/SSL Certificate Paths (for HTTPS communication)
# ğŸ“ Paths to certificate and private key files for secure API communication
# ğŸ”’ Required for production deployments
# ğŸ› ï¸  Generate self-signed: openssl req -x509 -newkey rsa:4096 -keyout key.pem -out cert.pem -days 365 -nodes
# ğŸ“ Mount these files in docker-compose.yaml volumes section
# ğŸ’¡ Use full paths: /etc/vpn-sentinel/vpn-sentinel-cert.pem
VPN_SENTINEL_TLS_CERT_PATH=/path/to/vpn-sentinel-cert.pem
VPN_SENTINEL_TLS_KEY_PATH=/path/to/vpn-sentinel-key.pem

# System Timezone (for accurate timestamps)
# ğŸ“ Timezone for logs, notifications, and dashboard display
# ğŸ• Format: IANA timezone database names
# ğŸ” Examples: UTC, Europe/London, America/New_York, Asia/Tokyo, Australia/Sydney
# ğŸ’¡ Use UTC for servers, local timezone for personal deployments
TZ=UTC

# =============================================================================
# ğŸ“¡ VPN SENTINEL CLIENT CONFIGURATION
# =============================================================================
#
# Configuration for the VPN Sentinel monitoring client.
# The client runs inside the VPN network and reports status to the server.

# Server API Base URL (REQUIRED - where client sends reports)
# ğŸ“ Full URL to the VPN Sentinel server API
# ğŸ” Format: protocol://hostname:port
# ğŸ’¡ Use Docker service name for same-compose deployments: http://vpn-sentinel-server:5000
# ğŸŒ Use external IP/domain for remote server: https://your-server.com:5000
# âš ï¸  Must include protocol (http/https) and port number
VPN_SENTINEL_SERVER_API_BASE_URL=http://vpn-sentinel-server:5000

# API Path Prefix (for API versioning and organization)
# ğŸ“ Prefix for all API endpoints
# ğŸ” Default: /api/v1 (recommended for future compatibility)
# ğŸ’¡ Allows API versioning: /api/v1, /api/v2, etc.
# ğŸ”„ Don't change unless you modify server endpoints
VPN_SENTINEL_SERVER_API_PATH=/api/v1

# Client Identifier (unique name for this monitoring instance)
# ğŸ“ Human-readable name for tracking and notifications
# ğŸ¯ Used in logs, dashboard, and Telegram alerts
# ğŸ“ Format: kebab-case (lowercase, dashes, no spaces)
# ğŸ” Examples: "home-office-vpn", "server-room-monitor", "mobile-vpn-client"
# ğŸ’¡ If empty, generates random 12-digit ID
# ğŸ”„ Change if running multiple clients
VPN_SENTINEL_CLIENT_ID=vpn-monitor-main

# =============================================================================
# ğŸ–¥ï¸  VPN SENTINEL SERVER CONFIGURATION
# =============================================================================
#
# Configuration for the VPN Sentinel monitoring server.
# The server receives client reports and provides the web dashboard.

# Server API Port (port for client-server communication)
# ğŸ“ Port where server listens for client API requests
# ğŸ” Default: 5000 (Flask default)
# ğŸŒ Must be accessible from VPN network for clients to connect
# ğŸ”’ Firewall: Restrict to VPN network only in production
# ğŸ’¡ Change if port 5000 conflicts with other services
VPN_SENTINEL_SERVER_API_PORT=5000

# Web Dashboard Port (port for web interface)
# ğŸ“ Port where web dashboard is accessible
# ğŸ” Default: 8080 (avoids conflicts with API port)
# ğŸŒ Access dashboard at: http://your-server:8080
# ğŸ”’ Firewall: Restrict access to trusted networks
# ğŸ’¡ Use reverse proxy (nginx/caddy) for SSL termination in production
VPN_SENTINEL_SERVER_DASHBOARD_PORT=8080

# =============================================================================
# ğŸ›¡ï¸  SERVER SECURITY SETTINGS
# =============================================================================

# Rate Limiting (requests per minute per IP)
# ğŸ“ Maximum API requests allowed per IP address per minute
# ğŸ›¡ï¸  Protects against abuse and DoS attacks
# ğŸ” Default: 30 (reasonable for monitoring traffic)
# ğŸ’¡ Increase for high-frequency monitoring, decrease for security
# ğŸ“Š Monitor logs for rate limit hits and adjust accordingly
VPN_SENTINEL_SERVER_RATE_LIMIT_REQUESTS=30

# IP Whitelist (comma-separated CIDR blocks)
# ğŸ“ Restrict server access to specific IP ranges
# ğŸ›¡ï¸  Additional security layer for API and dashboard
# ğŸ” Format: CIDR notation (192.168.1.0/24) or single IPs
# ğŸ’¡ Examples: 192.168.1.0/24,10.0.0.0/8,172.16.0.0/12
# ğŸš« Leave empty to allow all IPs (not recommended for production)
# ğŸ’¡ Use VPN gateway IPs or trusted network ranges
VPN_SENTINEL_SERVER_ALLOWED_IPS=

# =============================================================================
# ğŸ“Š MONITORING & ALERTING CONFIGURATION
# =============================================================================

# Web Dashboard Enable/Disable
# ğŸ“ Controls whether the web dashboard is available
# ğŸ” Default: true (dashboard provides useful status overview)
# ğŸ’¡ Set to false for headless deployments or API-only usage
# ğŸŒ Dashboard shows: client status table, last seen times, connection status
VPN_SENTINEL_SERVER_DASHBOARD_ENABLED=true

# Alert Threshold (minutes before sending offline alerts)
# ğŸ“ Send notification if client hasn't reported for X minutes
# ğŸš¨ Balance: Too short = false alarms, too long = delayed detection
# ğŸ” Default: 15 minutes (good balance for most use cases)
# ğŸ’¡ Adjust based on your monitoring requirements and network stability
# ğŸ“Š Formula: threshold > (check_interval * 2) + buffer
VPN_SENTINEL_SERVER_ALERT_THRESHOLD_MINUTES=15

# Check Interval (how often server checks client status)
# ğŸ“ Minutes between server health checks
# â° Determines monitoring frequency and alert responsiveness
# ğŸ” Default: 5 minutes (reasonable for most deployments)
# ğŸ’¡ Shorter = more responsive but higher server load
# ğŸ“Š Affects: Dashboard updates, alert timing, log frequency
VPN_SENTINEL_SERVER_CHECK_INTERVAL_MINUTES=5

# =============================================================================
# ğŸ“± TELEGRAM BOT INTEGRATION (Highly Recommended)
# =============================================================================
#
# Telegram notifications provide instant alerts for VPN issues.
# Setup takes 2 minutes and provides critical monitoring capabilities.
#
# ğŸ› ï¸  SETUP INSTRUCTIONS:
# 1. Message @BotFather on Telegram: https://t.me/botfather
# 2. Send command: /newbot
# 3. Follow prompts to create your bot and get the token
# 4. Message @userinfobot: https://t.me/userinfobot
# 5. Send any message to get your Chat ID
# 6. Save both values below
#
# ğŸ“ REQUIRED VALUES:
# â€¢ TELEGRAM_BOT_TOKEN: From BotFather (format: 1234567890:ABCdefGhIjKlMnOpQrStUvWxYz)
# â€¢ TELEGRAM_CHAT_ID: From userinfobot (format: 123456789)
#
# ğŸ” EXAMPLES:
# TELEGRAM_BOT_TOKEN=1234567890:ABCdefGhIjKlMnOpQrStUvWxYz
# TELEGRAM_CHAT_ID=123456789
#
# ğŸ’¡ FEATURES:
# â€¢ Instant notifications when VPN goes down
# â€¢ Client status updates and recovery alerts
# â€¢ Customizable alert messages
# â€¢ Works worldwide, no port forwarding needed

TELEGRAM_BOT_TOKEN=your_telegram_bot_token_here
TELEGRAM_CHAT_ID=your_telegram_chat_id_here

# =============================================================================
# ğŸ¯ QUICK START CHECKLIST
# =============================================================================
#
# Before deploying, verify these critical settings:
# âœ… VPN_SERVICE_PROVIDER - Valid provider name
# âœ… VPN_USER/VPN_PASSWORD - Your VPN credentials
# âœ… VPN_SENTINEL_API_KEY - Generated with: openssl rand -hex 32
# âœ… VPN_SENTINEL_SERVER_API_BASE_URL - Correct server URL
# âœ… TELEGRAM_BOT_TOKEN/CHAT_ID - For notifications (recommended)
#
# Test deployment:
# 1. docker compose config (validate syntax)
# 2. docker compose up -d (deploy)
# 3. docker compose logs -f (monitor startup)
# 4. Access dashboard: http://localhost:8080
#
# =============================================================================
